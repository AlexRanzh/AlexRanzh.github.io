<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">

  <!-- PACE Progress Bar START -->
  
    <script src="https://raw.githubusercontent.com/HubSpot/pace/v1.0.2/pace.min.js"></script>
    <link rel="stylesheet" href="https://github.com/HubSpot/pace/raw/master/themes/orange/pace-theme-flash.css">
  
  

  <!-- PACE Progress Bar START -->

  
  <title>ds100&amp;more - data manipulation and cleaning | Alex Zihuan Ran</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
    <meta name="keywords" content="ssss">
  
  
  
  
  <meta name="description" content="This is the first section for my study note: DS100&amp;amp;More, which records some useful points in data ETL(Extract, Transform and Loaded), visualisation, and modelling. The motivation is to keep a reco">
<meta name="keywords" content="Data Science,Python,Pandas,Data Cleaning">
<meta property="og:type" content="article">
<meta property="og:title" content="DS100&amp;More - Data Manipulation and Cleaning">
<meta property="og:url" content="http://yoursite.com/2019/04/06/DS100 - Data Manipulation and Cleaning/index.html">
<meta property="og:site_name" content="Alex Zihuan Ran">
<meta property="og:description" content="This is the first section for my study note: DS100&amp;amp;More, which records some useful points in data ETL(Extract, Transform and Loaded), visualisation, and modelling. The motivation is to keep a reco">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-06-01T07:54:45.602Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="DS100&amp;More - Data Manipulation and Cleaning">
<meta name="twitter:description" content="This is the first section for my study note: DS100&amp;amp;More, which records some useful points in data ETL(Extract, Transform and Loaded), visualisation, and modelling. The motivation is to keep a reco">
  
    <link rel="alternate" href="/atom.xml" title="Alex Zihuan Ran" type="application/atom+xml">
  
  <link rel="icon" href="/css/images/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="https://cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/css/style.css">

  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/hiero.css">
  <link rel="stylesheet" href="/css/glyphs.css">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/my.css">
  <!-- Google Adsense -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
      (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-0123456789ABCDEF",
          enable_page_level_ads: true
      });
  </script>
  
</head>
</html>
<script>
var themeMenus = {};

  themeMenus["/"] = "Home"; 

  themeMenus["/archives"] = "Archives"; 

  themeMenus["/categories"] = "Categories"; 

  themeMenus["/tags"] = "Tags"; 

  themeMenus["/about"] = "About"; 

</script>


  <body data-spy="scroll" data-target="#toc" data-offset="50">


  <header id="allheader" class="site-header" role="banner">
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" title="Alex Zihuan Ran" rel="home"> Bello! </a>
            
          </h1>

          
            <div class="site-description">I&#39;m Alex Ran, 冉梓欢.</div>
          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>
            <div class="clearfix sf-menu">

              <ul id="main-nav" class="nmenu sf-js-enabled">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/">Home</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/archives">Archives</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/categories">Categories</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/tags">Tags</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/about">About</a> </li>
                    
              </ul>
            </div>
          </nav>


      </div>
  </div>
</header>


  <div id="originBgDiv" style="background: #fff; width: 100%;">

      <div style="max-height:600px; overflow: hidden;  display: flex; display: -webkit-flex; align-items: center;">
        <img id="originBg" width="100%" alt src>
      </div>

  </div>

  <script>
  function setAboutIMG(){
      var imgUrls = "css/images/data_idea.jpg".split(",");
      var random = Math.floor((Math.random() * imgUrls.length ));
      if (imgUrls[random].startsWith('http') || imgUrls[random].indexOf('://') >= 0) {
        document.getElementById("originBg").src=imgUrls[random];
      } else {
        document.getElementById("originBg").src='/' + imgUrls[random];
      }
  }
  bgDiv=document.getElementById("originBgDiv");
  if(location.pathname.match('about')){
    setAboutIMG();
    bgDiv.style.display='block';
  }else{
    bgDiv.style.display='none';
  }
  </script>



  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-DS100 - Data Manipulation and Cleaning" style="width: 66%; float:left;" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      DS100&amp;More - Data Manipulation and Cleaning
    </h1>
  

      </header>
    
    
    <div class="article-meta">
      
	Posted on <a href="/2019/04/06/DS100 - Data Manipulation and Cleaning/" class="article-date">
	  <time datetime="2019-04-06T12:16:24.000Z" itemprop="datePublished">April 6, 2019</time>
	</a>

      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/Study-Notes/">Study Notes</a>, <a class="article-category-link" href="/categories/Study-Notes/DS-Notes/">DS Notes</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Data-Cleaning/">Data Cleaning</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Data-Science/">Data Science</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Pandas/">Pandas</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li></ul>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>This is the first section for my study note: DS100&amp;More, which records some useful points in data ETL(Extract, Transform and Loaded), visualisation, and modelling. The motivation is to keep a record of my second learning of UC Berkeley DS100 course:  Principles and Techniques of Data Science. By learning relative knowledge, reader should be familiar with some python tools that are in use now, as well as making some inferences from data by hand.</p>
<p>Please contact me at <a href="mailto:zr116@ic.ac.uk" target="_blank" rel="noopener">zr116@ic.ac.uk</a> for any correction and improvement, general discussion on data science is also welcome.</p>
<h3 id="Today’s-Objectives"><a href="#Today’s-Objectives" class="headerlink" title="Today’s Objectives"></a>Today’s Objectives</h3><ol>
<li>EDA(Exploratory Data Analysis)</li>
<li>Use python Pandas to do EDA</li>
</ol>
<h3 id="Tabular-Data"><a href="#Tabular-Data" class="headerlink" title="Tabular Data"></a>Tabular Data</h3><p><a href="https://www.textbook.ds100.org/ch/03/pandas_intro.html" target="_blank" rel="noopener">DS100 Textbook: Tabular Data</a></p>
<p>The first thing to do when we have a new data set in hand is to look at its inside. Data can be structured in different ways:<br>1.1 Comma-Separated Values (CSV)<br>[example]<br>1.2 Tab-Separated Values (TSV)<br>2.1 JavaScript Object Format (JSON)<br>[curly brackets]<br>3.1 eXtensible Markup Language (XML)<br>[how websites store info]<br>3.2 HyperText Markup Language (HTML)</p>
<blockquote>
<p>CSV and TSV data is structured in a tabular structure, in rows and columns.<br>JSON, XML, HTML data has a hierarchical structure, like a tree.<br>(see Hokodo intern note for JSON processing methods)</p>
</blockquote>
<p>Check file format:</p>
<ol>
<li>right click and view profile</li>
<li>fancier way:<br>use command-line interface (CLI) tools/terminal<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>or if you are in Jupyter notebook:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!ls</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>!+command line in Jupyter</p>
</blockquote>
<p>Although all these data formats are often used, CSV is often the easiest and most frequently used structure.</p>
<p>Before reading data, need to figure out how much memory it is going to take.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">!ls -l -h folder</span><br><span class="line">!du -h folder</span><br><span class="line">#specific file usage</span><br><span class="line">!du -sh folder/*</span><br></pre></td></tr></table></figure>
<p>As a rule of thumb, reading in a file of x GB requires 4x GB memory. <code>Pandas</code> needs 2x but has to share memory with other programs.</p>
<blockquote>
<p><strong>Memory Overhead</strong><br>Note that memory is shared by all programs running on a computer, including the operating system, web browsers, and yes, Jupyter notebook itself. A computer with 4 GiB total RAM might have only 1 GiB available RAM with many applications running. With 1 GiB available RAM, it is unlikely that <code>pandas</code> will be able to read in a 1 GiB file.</p>
</blockquote>
<ul>
<li>To view CSV data in python:</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">data = pd.read_csv(&apos;&apos;)</span><br></pre></td></tr></table></figure>
<ul>
<li>How many rows and columns:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data.shape</span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>Check the size of data before inpecting it to avoid printing too many columns, which is not helpful to getting to konw the data.</p>
</blockquote>
<ul>
<li><p>Total size:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data.size</span><br></pre></td></tr></table></figure>
</li>
<li><p>Inspecting important statistical values of numerical variables in a data set:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data.describe()</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>This returns count, mean, standard deviation, min, max, and quartiles. <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.describe.html" target="_blank" rel="noopener">Details</a></p>
<ul>
<li><p>inspect first/last several rows(default 5)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data.head(5)#first 5</span><br><span class="line">data.tail(3)#last 3</span><br></pre></td></tr></table></figure>
</li>
<li><p>other common command</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#set &apos;col_name&apos; column as index column, in_place replace the old index column</span><br><span class="line">data.set_index(&apos;col_name&apos;, in_place = True)</span><br><span class="line"></span><br><span class="line">#list all column names</span><br><span class="line">data.columns</span><br><span class="line"></span><br><span class="line">#selection</span><br><span class="line">##select entries in column &apos;col1&apos;</span><br><span class="line">data[&apos;col1&apos;]</span><br><span class="line">##select two columns: col1, col2</span><br><span class="line">data[[&apos;col1&apos;,&apos;col2&apos;]]</span><br><span class="line">##make selected part into a DataFrame</span><br><span class="line">data[[&apos;col1&apos;,&apos;col2&apos;]].to_frame()</span><br><span class="line">##select rows that has val1 in col1</span><br><span class="line">data[data[&apos;col1&apos;]==val1]</span><br><span class="line"></span><br><span class="line">#column manipulation</span><br><span class="line">##count number of each value in a column</span><br><span class="line">data[&apos;col1&apos;].value_count()</span><br><span class="line">##print unique values in a column</span><br><span class="line">data[&apos;col1&apos;].unique()</span><br><span class="line">##statistical values of a column</span><br><span class="line">data[&apos;col1&apos;].min()</span><br><span class="line">data[&apos;col1&apos;].max()</span><br><span class="line">data[&apos;col1&apos;].median()</span><br><span class="line"></span><br><span class="line">#locator</span><br><span class="line">data.loc[row_list,col_list]</span><br><span class="line">data.iloc[[row_index],[column_index]]</span><br></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/Study-Notes/">Study Notes</a>, <a class="article-category-link" href="/categories/Study-Notes/DS-Notes/">DS Notes</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Data-Cleaning/">Data Cleaning</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Data-Science/">Data Science</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Pandas/">Pandas</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li></ul>

      
        
	<div id="comment">
		<!-- 来必力City版安装代码 -->
		<div id="lv-container" data-id="city" data-uid="MTAyMC8yOTQ4MS82MDQ5">
		<script type="text/javascript">
		   (function(d, s) {
		       var j, e = d.getElementsByTagName(s)[0];

		       if (typeof LivereTower === 'function') { return; }

		       j = d.createElement(s);
		       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
		       j.async = true;

		       e.parentNode.insertBefore(j, e);
		   })(document, 'script');
		</script>
		<noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
		</div>
		<!-- City版安装代码已完成 -->
	</div>


      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/04/13/Quantitative Methods in Retail Finance Notes1/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Prev</strong>
      <div class="article-nav-title">
        
          Quantitative Method in Retail Finance Note 1
        
      </div>
    </a>
  
  
    <a href="/2018/10/27/Parallel computing with Fortran, OpenMP and MPI/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Next</strong>
      <div class="article-nav-title">Parallel Computing with Fortran, OpenMP and MPI</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="sidebar">
    <div id="toc" class="toc-article" style="overflow-y: scroll; max-width: 28%;">
    <strong class="toc-title">Contents</strong>
    
      <ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#Today’s-Objectives"><span class="nav-number">1.</span> <span class="nav-text">Today’s Objectives</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Tabular-Data"><span class="nav-number">2.</span> <span class="nav-text">Tabular Data</span></a></li></ol>
    
    </div>
  </aside>
</section>
        
      </div>
      <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2019 Z.Ran All Rights Reserved.
          <!-- 
            <span id="busuanzi_container_site_uv">
              本站访客数<span id="busuanzi_value_site_uv"></span>人次  
              本站总访问量<span id="busuanzi_value_site_pv"></span>次
            </span>
           -->
      </div>
      <div class="site-credit">
        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hiero" target="_blank">hiero</a>
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var contentdiv = document.getElementById("content");

    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
</script>

<!-- Custome JS -->
<script src="/js/my.js"></script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/categories" class="mobile-nav-link">Categories</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>


<script src="/js/scripts.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>







  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>



	<script async src="https://dnqof95d40fo6.cloudfront.net/atw7f8.js">
	</script>






  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
